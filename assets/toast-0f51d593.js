import{n as _,p,q as b,r as y,v as I}from"./index-03e5f1d1.js";const R=t=>typeof t=="function",D=(t,s)=>R(t)?t(s):t;var n;(function(t){t[t.ADD_TOAST=0]="ADD_TOAST",t[t.UPDATE_TOAST=1]="UPDATE_TOAST",t[t.UPSERT_TOAST=2]="UPSERT_TOAST",t[t.DISMISS_TOAST=3]="DISMISS_TOAST",t[t.REMOVE_TOAST=4]="REMOVE_TOAST",t[t.START_PAUSE=5]="START_PAUSE",t[t.END_PAUSE=6]="END_PAUSE"})(n||(n={}));const[S,d]=_({toasts:[],pausedAt:void 0}),N=()=>{const{pausedAt:t,toasts:s}=S;if(t)return;const o=Date.now();return s.map(e=>{if(e.duration===1/0)return;const a=(e.duration||0)+e.pauseDuration-(o-e.createdAt);if(a<=0){e.visible&&u({type:n.DISMISS_TOAST,toastId:e.id});return}return setTimeout(()=>{u({type:n.DISMISS_TOAST,toastId:e.id})},a)})},T=new Map,h=(t,s)=>{if(T.has(t))return;const o=setTimeout(()=>{T.delete(t),u({type:n.REMOVE_TOAST,toastId:t})},s);T.set(t,o)},P=t=>{const s=T.get(t);T.delete(t),s&&clearTimeout(s)},u=t=>{switch(t.type){case n.ADD_TOAST:d("toasts",e=>{const a=e;return[t.toast,...a]});break;case n.DISMISS_TOAST:const{toastId:s}=t,o=S.toasts;if(s){const e=o.find(a=>a.id===s);e&&h(s,e.unmountDelay),d("toasts",a=>a.id===s,p(a=>a.visible=!1))}else o.forEach(e=>{h(e.id,e.unmountDelay)}),d("toasts",e=>e.id!==void 0,p(e=>e.visible=!1));break;case n.REMOVE_TOAST:if(!t.toastId){d("toasts",[]);break}d("toasts",e=>e.filter(A=>A.id!==t.toastId));break;case n.UPDATE_TOAST:t.toast.id&&P(t.toast.id),d("toasts",e=>e.id===t.toast.id,e=>({...e,...t.toast}));break;case n.UPSERT_TOAST:S.toasts.find(e=>e.id===t.toast.id)?u({type:n.UPDATE_TOAST,toast:t.toast}):u({type:n.ADD_TOAST,toast:t.toast});break;case n.START_PAUSE:d(p(e=>{e.pausedAt=Date.now(),e.toasts.forEach(a=>{a.paused=!0})}));break;case n.END_PAUSE:const i=t.time-(S.pausedAt||0);d(p(e=>{e.pausedAt=void 0,e.toasts.forEach(a=>{a.pauseDuration+=i,a.paused=!1})}));break}},v={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},g={id:"",icon:"",unmountDelay:500,duration:3e3,ariaProps:{role:"status","aria-live":"polite"},className:"",style:{},position:"top-right",iconTheme:{}},E={position:"top-right",toastOptions:g,gutter:8,containerStyle:{},containerClassName:""},O="16px",w={position:"fixed","z-index":9999,top:O,bottom:O,left:O,right:O,"pointer-events":"none"},U=(()=>{let t=0;return()=>String(++t)})(),V=t=>{k(s=>({containerClassName:t.containerClassName??s.containerClassName,containerStyle:t.containerStyle??s.containerStyle,gutter:t.gutter??s.gutter,position:t.position??s.position,toastOptions:{...t.toastOptions}}))},z=(t,s)=>{const i=t.includes("top")?{top:0,"margin-top":`${s}px`}:{bottom:0,"margin-bottom":`${s}px`},e=t.includes("center")?{"justify-content":"center"}:t.includes("right")?{"justify-content":"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:"all 230ms cubic-bezier(.21,1.02,.73,1)",...i,...e}},j=(t,s)=>{const o=t.getBoundingClientRect();o.height!==s.height&&u({type:n.UPDATE_TOAST,toast:{id:s.id,height:o.height}})},B=(t,s)=>{const{toasts:o}=S,i=l().gutter||E.gutter||8,e=o.filter(c=>(c.position||s)===s&&c.height),a=e.findIndex(c=>c.id===t.id),A=e.filter((c,m)=>m<a&&c.visible).length;return e.slice(0,A).reduce((c,m)=>c+i+(m.height||0),0)},W=(t,s)=>(t.position||s).includes("top")?1:-1,[l,k]=b(E),x=(t,s="blank",o)=>({...g,...l().toastOptions,...o,type:s,message:t,pauseDuration:0,createdAt:Date.now(),visible:!0,id:o.id||U(),paused:!1,style:{...g.style,...l().toastOptions?.style,...o.style},duration:o.duration||l().toastOptions?.duration||v[s],position:o.position||l().toastOptions?.position||l().position||g.position}),f=t=>(s,o={})=>I(()=>{const i=S.toasts.find(a=>a.id===o.id),e=x(s,t,{...i,duration:void 0,...o});return u({type:n.UPSERT_TOAST,toast:e}),e.id}),r=(t,s)=>f("blank")(t,s);y(()=>r);r.error=f("error");r.success=f("success");r.loading=f("loading");r.custom=f("custom");r.dismiss=t=>{u({type:n.DISMISS_TOAST,toastId:t})};r.promise=(t,s,o)=>{const i=r.loading(s.loading,{...o});return t.then(e=>(r.success(D(s.success,e),{id:i,...o}),e)).catch(e=>{r.error(D(s.error,e),{id:i,...o})}),t};r.remove=t=>{u({type:n.REMOVE_TOAST,toastId:t})};export{n as A,u as a,g as b,N as c,w as d,B as e,z as f,W as g,V as m,D as r,S as s,r as t,j as u};
