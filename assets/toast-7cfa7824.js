import{g as _,q as S,b as y,r as E,v}from"./index-5a63ca4d.js";var C=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function x(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function N(t){if(t.__esModule)return t;var s=t.default;if(typeof s=="function"){var o=function a(){if(this instanceof a){var e=[null];e.push.apply(e,arguments);var n=Function.bind.apply(s,e);return new n}return s.apply(this,arguments)};o.prototype=s.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(t).forEach(function(a){var e=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(o,a,e.get?e:{enumerable:!0,get:function(){return t[a]}})}),o}const P=t=>typeof t=="function",h=(t,s)=>P(t)?t(s):t;var i;(function(t){t[t.ADD_TOAST=0]="ADD_TOAST",t[t.UPDATE_TOAST=1]="UPDATE_TOAST",t[t.UPSERT_TOAST=2]="UPSERT_TOAST",t[t.DISMISS_TOAST=3]="DISMISS_TOAST",t[t.REMOVE_TOAST=4]="REMOVE_TOAST",t[t.START_PAUSE=5]="START_PAUSE",t[t.END_PAUSE=6]="END_PAUSE"})(i||(i={}));const[f,d]=_({toasts:[],pausedAt:void 0}),V=()=>{const{pausedAt:t,toasts:s}=f;if(t)return;const o=Date.now();return s.map(e=>{if(e.duration===1/0)return;const n=(e.duration||0)+e.pauseDuration-(o-e.createdAt);if(n<=0){e.visible&&u({type:i.DISMISS_TOAST,toastId:e.id});return}return setTimeout(()=>{u({type:i.DISMISS_TOAST,toastId:e.id})},n)})},p=new Map,b=(t,s)=>{if(p.has(t))return;const o=setTimeout(()=>{p.delete(t),u({type:i.REMOVE_TOAST,toastId:t})},s);p.set(t,o)},I=t=>{const s=p.get(t);p.delete(t),s&&clearTimeout(s)},u=t=>{switch(t.type){case i.ADD_TOAST:d("toasts",e=>{const n=e;return[t.toast,...n]});break;case i.DISMISS_TOAST:const{toastId:s}=t,o=f.toasts;if(s){const e=o.find(n=>n.id===s);e&&b(s,e.unmountDelay),d("toasts",n=>n.id===s,S(n=>n.visible=!1))}else o.forEach(e=>{b(e.id,e.unmountDelay)}),d("toasts",e=>e.id!==void 0,S(e=>e.visible=!1));break;case i.REMOVE_TOAST:if(!t.toastId){d("toasts",[]);break}d("toasts",e=>e.filter(m=>m.id!==t.toastId));break;case i.UPDATE_TOAST:t.toast.id&&I(t.toast.id),d("toasts",e=>e.id===t.toast.id,e=>({...e,...t.toast}));break;case i.UPSERT_TOAST:f.toasts.find(e=>e.id===t.toast.id)?u({type:i.UPDATE_TOAST,toast:t.toast}):u({type:i.ADD_TOAST,toast:t.toast});break;case i.START_PAUSE:d(S(e=>{e.pausedAt=Date.now(),e.toasts.forEach(n=>{n.paused=!0})}));break;case i.END_PAUSE:const a=t.time-(f.pausedAt||0);d(S(e=>{e.pausedAt=void 0,e.toasts.forEach(n=>{n.pauseDuration+=a,n.paused=!1})}));break}},R={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},O={id:"",icon:"",unmountDelay:500,duration:3e3,ariaProps:{role:"status","aria-live":"polite"},className:"",style:{},position:"top-right",iconTheme:{}},D={position:"top-right",toastOptions:O,gutter:8,containerStyle:{},containerClassName:""},g="16px",z={position:"fixed","z-index":9999,top:g,bottom:g,left:g,right:g,"pointer-events":"none"},M=(()=>{let t=0;return()=>String(++t)})(),B=t=>{U(s=>({containerClassName:t.containerClassName??s.containerClassName,containerStyle:t.containerStyle??s.containerStyle,gutter:t.gutter??s.gutter,position:t.position??s.position,toastOptions:{...t.toastOptions}}))},W=(t,s)=>{const a=t.includes("top")?{top:0,"margin-top":`${s}px`}:{bottom:0,"margin-bottom":`${s}px`},e=t.includes("center")?{"justify-content":"center"}:t.includes("right")?{"justify-content":"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:"all 230ms cubic-bezier(.21,1.02,.73,1)",...a,...e}},Y=(t,s)=>{const o=t.getBoundingClientRect();o.height!==s.height&&u({type:i.UPDATE_TOAST,toast:{id:s.id,height:o.height}})},$=(t,s)=>{const{toasts:o}=f,a=l().gutter||D.gutter||8,e=o.filter(c=>(c.position||s)===s&&c.height),n=e.findIndex(c=>c.id===t.id),m=e.filter((c,A)=>A<n&&c.visible).length;return e.slice(0,m).reduce((c,A)=>c+a+(A.height||0),0)},q=(t,s)=>(t.position||s).includes("top")?1:-1,[l,U]=y(D),w=(t,s="blank",o)=>({...O,...l().toastOptions,...o,type:s,message:t,pauseDuration:0,createdAt:Date.now(),visible:!0,id:o.id||M(),paused:!1,style:{...O.style,...l().toastOptions?.style,...o.style},duration:o.duration||l().toastOptions?.duration||R[s],position:o.position||l().toastOptions?.position||l().position||O.position}),T=t=>(s,o={})=>v(()=>{const a=f.toasts.find(n=>n.id===o.id),e=w(s,t,{...a,duration:void 0,...o});return u({type:i.UPSERT_TOAST,toast:e}),e.id}),r=(t,s)=>T("blank")(t,s);E(()=>r);r.error=T("error");r.success=T("success");r.loading=T("loading");r.custom=T("custom");r.dismiss=t=>{u({type:i.DISMISS_TOAST,toastId:t})};r.promise=(t,s,o)=>{const a=r.loading(s.loading,{...o});return t.then(e=>(r.success(h(s.success,e),{id:a,...o}),e)).catch(e=>{r.error(h(s.error,e),{id:a,...o})}),t};r.remove=t=>{u({type:i.REMOVE_TOAST,toastId:t})};export{i as A,x as a,V as b,C as c,z as d,q as e,u as f,N as g,O as h,$ as i,W as j,B as m,h as r,f as s,r as t,Y as u};
